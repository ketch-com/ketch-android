<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <variable
            name="theme"
            type="com.ketch.android.ui.theme.ColorTheme" />

        <variable
            name="purpose"
            type="com.ketch.android.api.response.Purpose" />

        <variable
            name="enabled"
            type="Boolean" />

        <variable
            name="accepted"
            type="Boolean" />

        <variable
            name="expanded"
            type="Boolean" />
    </data>

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:animateLayoutChanges="true"
        android:padding="8dp">

        <com.google.android.material.checkbox.MaterialCheckBox
            android:id="@+id/expandButton"
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:background="@android:color/transparent"
            android:button="@drawable/expand"
            android:checked="@{expanded}"
            app:iconTint="@{theme.bodyTextColor}"
            app:layout_constraintEnd_toStartOf="@+id/title"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <TextView
            android:id="@+id/title"
            style="@style/Label"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="@{purpose.name}"
            app:layout_constraintEnd_toStartOf="@+id/acceptSwitch"
            app:layout_constraintStart_toEndOf="@+id/expandButton"
            app:layout_constraintTop_toTopOf="parent"
            app:textColor="@{theme.bodyTextColor}"
            tools:text="User ID Linking" />

        <TextView
            android:id="@+id/legalBasisName"
            style="@style/Footnote"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="@{@string/legal_basic_name(purpose.legalBasisName)}"
            app:layout_constraintEnd_toStartOf="@+id/acceptSwitch"
            app:layout_constraintStart_toStartOf="@+id/title"
            app:layout_constraintTop_toBottomOf="@+id/title"
            app:textColor="@{theme.bodyTextColor}"
            tools:text="Legal Basis: Consent Opt In" />

        <com.google.android.material.switchmaterial.SwitchMaterial
            android:id="@+id/acceptSwitch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="@{accepted}"
            android:enabled="@{enabled}"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:thumbTint="@android:color/white"
            app:trackTintOff="@{theme.switchOffColor}"
            app:trackTintOn="@{theme.switchOnColor}"
            app:useMaterialThemeColors="false" />

        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/expandedPanel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="@+id/title"
            app:layout_constraintTop_toBottomOf="@+id/legalBasisName"
            tools:visibility="visible">

            <TextView
                android:id="@+id/purposeDescription"
                style="@style/Body"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintBottom_toTopOf="@+id/legalBasicDescription"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:textColor="@{theme.bodyTextColor}"
                tools:text="Collection and processing of personal data to enable functionality that is essential to providing our services, including security activities, debugging, authentication, and fraud prevention, as well as contacting you with information related to products/services you have used or purchased; we may set essential cookies or other trackers for these purposes." />

            <TextView
                android:id="@+id/legalBasicDescription"
                style="@style/Body"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginVertical="16dp"
                app:layout_constraintBottom_toTopOf="@+id/categories"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@+id/purposeDescription"
                app:textColor="@{theme.bodyTextColor}"
                tools:text="Data subject has been provided with adequate disclosure regarding the processing" />

            <TextView
                android:id="@+id/categories"
                style="@style/Label"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="8dp"
                android:clickable="true"
                android:drawablePadding="6dp"
                android:focusable="true"
                android:text="@string/data_categories"
                android:visibility="gone"
                app:drawableEndCompat="@drawable/ic_link"
                app:iconTint="@{theme.bodyTextColor}"
                app:layout_constraintBottom_toTopOf="@+id/vendors"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@+id/legalBasicDescription"
                app:textColor="@{theme.bodyTextColor}"
                tools:visibility="visible" />

            <TextView
                android:id="@+id/vendors"
                style="@style/Label"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="8dp"
                android:clickable="true"
                android:drawablePadding="6dp"
                android:focusable="true"
                android:text="@string/vendors"
                android:visibility="gone"
                app:drawableEndCompat="@drawable/ic_link"
                app:iconTint="@{theme.bodyTextColor}"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@+id/categories"
                app:textColor="@{theme.bodyTextColor}"
                tools:visibility="visible" />

        </androidx.constraintlayout.widget.ConstraintLayout>

    </androidx.constraintlayout.widget.ConstraintLayout>
</layout>